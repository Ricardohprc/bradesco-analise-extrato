<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <script>
      $(function () {

        var rows_group_by_month;

        function print_f1(){
          var keys = Object.keys(rows_group_by_month);
          keys.sort(function (a, b) {
            var _a = new Date(parseInt(a.split('/')[1]) + 2000, parseInt(a.split('/')[0]), 1);
            var _b = new Date(parseInt(b.split('/')[1]) + 2000, parseInt(b.split('/')[0]), 1);
            return _a - _b;
          });
          $('#f1 table tbody').html('');
          $.each(keys, function (i, e){
            $('#f1 table tbody').append('<tr><td>' + e + '</td><td>' + rows_group_by_month[e].length + '</td></tr>');
          });
        }

        $('#f2').hide();
        $('#f2 tbody').html('');
        $('#f2 #f2_total').html('');

        $('#f2_search button').click(function() {
          if ($('#f2_search input').val() != ''){
            $('#f2').show();
          }
          else {
            f2_hide();
          }
        });

        function f2_hide(){
          $('#f2').hide();
          $('#f2_search input').val('');
        }

        $('#f2 #f2_hide').click(f2_hide);

        $.getJSON('rows_group_by_month.json', function (remote_rows_group_by_month) {
          rows_group_by_month = remote_rows_group_by_month;
          print_f1();
        });
      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="page-header">
        <h1>Bradesco <small>análise de extrato</small></h1>
      </div>

      <section class="col-md-8">

        <div id="f2_search" class="input-group">
          <input type="text" class="form-control" placeholder="Buscar por...">
          <span class="input-group-btn">
            <button class="btn btn-success" type="button">Buscar</button>
          </span>
        </div>

        <br>

        <div id="f2" class="panel panel-default">
          <div class="panel-heading">
            <button id="f2_hide" type="button" class="btn btn-danger btn-xs pull-right">
              <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            </button>
            Resultados para "Teste"
          </div>
          <table class="table">
            <thead>
              <tr>
                <th>Mês</th>
                <th>Valor</th>
                <th>Total Geral</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>01/14</td>
                <td>R$ 306,01</td>
                <td>0.41% (R$ 73,962.17)</td>
                <td>3.48%</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td><b>Total</b></td>
                <td></td>
                <td></td>
                <td><b id="f2_total">R$ 8,781.66</b></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </section>

      <section class="col-md-4">
        <div id="f1" class="panel panel-default">
          <div class="panel-heading">Meses & Registros</div>
          <table class="table">
            <thead>
              <tr>
                <th>Mês</th>
                <th>Qtde Registros</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </body>
</html>
